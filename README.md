# sDGLM
Switching Dynamic Generalized Linear Model

This GitHub repository provides the code and data for the paper "Detection of Abnormal Batting Performance in Major League Baseball"
by Chris Glynn and Surya Tokdar.  

To generate results, there are three R scripts that need to be executed.  Make sure that the variable dir = "~/sDGLM-master/" in 
each of the R scripts points to the correct directory for the code on your local machine.

1) Code/Production_setup.R
The Production_setup.R script will construct transition matrices, load and format data, and specify hyper parameters for the MCMC simulation.
The user needs to specify the number of latent ability classes, K.  The default is K = 15.  

2) Code/main.R
The main.R script will execute the MCMC simulation and save the samples.  Depending on how many cores the user has available, simulations
may be run in parallel.  To generate 6 runs to examine reproducibility, fix inits = INIT_base + 1:6.  This will be necessary for generating figures
in a post processing step.  It will also be necessary to run six simulations with K = 15 (inits = INIT_base + 1:6), one simulation with K = 13 (inits = INIT_base + 13), and 
and one simulation with K = 17 (inits = INIT_base + 17).  Before running the simulations with different values of K, re-run step 1) to properly set up 
the transition matrices for the different number of ability classes.  

3) Code/Post_Processing/Post_Proc_Reproducible_Year.R
This R script will generate figures in the results section of the paper.  The figures generated by the R script Code/Post_Processing/Post_Proc_Reproducible_Year.R 
require there to be 6 simulations with K = 15 and one simulation with K = 13 and one simulation with K = 17.  

  
